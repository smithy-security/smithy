name: codeql
description: 'Github CodeQL static analysis for code.'
type: scanner
steps:
  - name: run-codeql
    imagePullPolicy: IfNotPresent
    image: components/scanners/codeql/codeql-image
    executable: /build/codeql-runner
    args:
      - -scratch-location={{ scratchWorkspace }}
      - -source-location={{ sourceCodeWorkspace }}
  - name: parser
    image: components/scanners/codeql/parser
    env_vars:
      CODEQL_RAW_OUT_FILE_GLOB: "{{ scratchWorkspace }}/*.sarif.json"
    executable: /bin/app
