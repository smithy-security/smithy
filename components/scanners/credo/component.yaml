name: credo
description: "Static code analysis tool for Elixir source code."
type: scanner
steps:
  - name: scanner
    image: components/scanners/credo/scanner
    env_vars:
      TERM: "dumb"
      ERL_FLAGS: "-noinput -noshell"
      CREDO_RESULTS_DIR: "{{ scratchWorkspace }}/results"
    executable: /bin/bash
    args:
      - -c
      - /entrypoint.sh {{ sourceCodeWorkspace }} ${CREDO_RESULTS_DIR}
  - name: parser
    image: components/scanners/credo
    env_vars:
      CREDO_RESULTS_DIR: "{{ scratchWorkspace }}/results"
      WORKSPACE_PATH: "{{ sourceCodeWorkspace }}"
    executable: /bin/app
